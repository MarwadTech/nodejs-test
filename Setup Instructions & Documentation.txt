# Backend Test Cases - Complete Setup Guide

## ğŸ“‹ Complete Test Case Summary

**Total Test Cases: 50**

### Test Coverage Breakdown:

#### **Email Parameter (18 Test Cases)**
- **Invalid Key (3 tests):** TC-BE-001 to TC-BE-003
  - Missing email, null, undefined
- **Incorrect Submission (6 tests):** TC-BE-004 to TC-BE-009
  - Empty string, whitespace, wrong data types (number, boolean, object, array)
- **Invalid Submission (9 tests):** TC-BE-010 to TC-BE-018
  - Invalid formats, SQL injection, XSS, special characters

#### **Password Parameter (12 Test Cases)**
- **Invalid Key (3 tests):** TC-BE-019 to TC-BE-021
  - Missing password, null, undefined
- **Incorrect Submission (6 tests):** TC-BE-022 to TC-BE-027
  - Empty string, whitespace, wrong data types
- **Invalid Submission (3 tests):** TC-BE-028 to TC-BE-030
  - Too short, too long

#### **User Status (4 Test Cases)**
- **Blocked Status (2 tests):** TC-BE-031 to TC-BE-032
- **Unverified Status (2 tests):** TC-BE-033 to TC-BE-034

#### **Other Scenarios (16 Test Cases)**
- Combined Invalid (4 tests): TC-BE-035 to TC-BE-038
- Request Format (3 tests): TC-BE-039 to TC-BE-041
- HTTP Methods (4 tests): TC-BE-042 to TC-BE-045
- Response Format (3 tests): TC-BE-046 to TC-BE-048
- Valid Scenarios (2 tests): TC-BE-049 to TC-BE-050

---

## ğŸš€ Quick Setup (5 Minutes)

### Step 1: Install Dependencies
```bash
npm install express mongoose dotenv cors
npm install -D typescript ts-node-dev @types/node @types/express @types/cors
npm install -D jest ts-jest @types/jest supertest @types/supertest mongodb-memory-server
```

### Step 2: Create Required Files

Create these files in your project:

**package.json** - Add these scripts:
```json
{
  "scripts": {
    "test": "jest --runInBand",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
```

**jest.config.js**
```javascript
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/tests'],
  testMatch: ['**/*.test.ts'],
  collectCoverageFrom: ['src/**/*.ts', '!src/**/*.d.ts'],
  verbose: true,
  setupFilesAfterEnv: ['<rootDir>/tests/setup.ts']
};
```

**tsconfig.json**
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true
  }
}
```

### Step 3: Copy Test File
Copy the test cases file to: `tests/login.test.ts`

### Step 4: Run Tests
```bash
npm test
```

---

## ğŸ“ Project Structure

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.ts              # Your Express app
â”‚   â”œâ”€â”€ routes/
â”‚   â””â”€â”€ controllers/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ setup.ts            # Test configuration
â”‚   â””â”€â”€ login.test.ts       # Your test cases (50 tests)
â”œâ”€â”€ package.json
â”œâ”€â”€ jest.config.js
â””â”€â”€ tsconfig.json
```

---

## ğŸ¯ What Each Test Validates

### Email Validation Tests
- âœ… Required field validation
- âœ… Data type validation (string only)
- âœ… Format validation (valid email format)
- âœ… Length validation (max 254 chars)
- âœ… Security (SQL injection, XSS prevention)

### Password Validation Tests
- âœ… Required field validation
- âœ… Data type validation (string only)
- âœ… Length validation (6-128 characters)
- âœ… Empty/whitespace rejection

### User Status Tests
- âœ… Blocked user rejection (403)
- âœ… Unverified user rejection (403)

### Request Tests
- âœ… HTTP method validation (only POST allowed)
- âœ… JSON format validation
- âœ… Response format validation

---

## ğŸ“Š Expected Test Results

When you run `npm test`, you should see:

```
PASS  tests/login.test.ts
  Admin Login API - Backend Test Cases
    Email Parameter - Invalid Key
      âœ“ TC-BE-001: Missing email field should return 400
      âœ“ TC-BE-002: Email field as null should return 400
      âœ“ TC-BE-003: Email field as undefined should return 400
    ... (47 more tests)

Tests:       50 passed, 50 total
Time:        5.234s
```

---

## ğŸ”§ Test Data Setup

Your test setup needs these users in the database:

```javascript
// In tests/setup.ts
const testUsers = [
  {
    email: 'active@example.com',
    password: 'hashedPassword',
    status: 'active',
    verified: true
  },
  {
    email: 'blocked@example.com',
    password: 'hashedPassword',
    status: 'blocked',
    verified: true
  },
  {
    email: 'unverified@example.com',
    password: 'hashedPassword',
    status: 'active',
    verified: false
  }
];
```

---

## âœ… Status Code Reference

| Status Code | Meaning | When Used |
|-------------|---------|-----------|
| 200/202 | Success | Valid request processed |
| 400 | Bad Request | Invalid email/password format |
| 403 | Forbidden | User blocked or unverified |
| 404 | Not Found | User doesn't exist |
| 405 | Method Not Allowed | Wrong HTTP method |

---

## ğŸ“ Test Case Naming Convention

```
TC-BE-XXX: Description
    â”‚   â”‚
    â”‚   â””â”€â”€ Test number (001-050)
    â””â”€â”€â”€â”€â”€â”€ Backend Test Case
```

---



---

## ğŸ’¡ Quick Commands

```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Generate coverage report
npm run test:coverage

# Run specific test
npm test -- -t "TC-BE-001"

# Run specific suite
npm test -- -t "Email Parameter"
```

---

## ğŸ“ Test Execution Tips

1. **First time setup**: Run `npm install` first
2. **Failed tests**: Check if your API endpoint is `/api/admin/login`
3. **Database issues**: Tests use in-memory MongoDB (no setup needed)
4. **Slow tests**: Use `--runInBand` flag (already in package.json)

---

## ğŸ“ What Makes These Tests Complete

âœ… **All Parameters Covered**: Email and Password  
âœ… **All Situations Covered**: Invalid key, Incorrect submission, Invalid submission  
âœ… **User Status Covered**: Blocked and Unverified  
âœ… **50 Comprehensive Tests**: Every edge case included  
âœ… **Well Documented**: Each test has clear description  
âœ… **Ready to Run**: No additional code needed  

---
